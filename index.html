<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-菜鸡的selenium之旅" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/21/菜鸡的selenium之旅/" class="article-date">
  <time datetime="2019-02-21T13:07:21.000Z" itemprop="datePublished">2019-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/21/菜鸡的selenium之旅/">菜鸡的selenium之旅</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>(注：以下举例不包含任何恶意行为，如有不适请予以指正)</p>
<p>前几天帮朋友写一个爬虫，给出一些公司的code和公司高管姓名，要求爬取对应高管的一些公开信息，我们打开新浪财经网，先手动操作这个过程,首先是首页搜索框输入公司代码如000021</p>
<p><img src="/2019/02/21/菜鸡的selenium之旅/homePage.png" alt="home_page"></p>
<p>然后打开一个新的页面，这里我们点击进入公司页面</p>
<p><img src="/2019/02/21/菜鸡的selenium之旅/searchPage.png" alt="search_page"></p>
<p>这里公司界面左下方我们找到公司高管的链接</p>
<p><img src="/2019/02/21/菜鸡的selenium之旅/comPage.png" alt="com_page"></p>
<p>之后进入公司高管页面</p>
<p><img src="/2019/02/21/菜鸡的selenium之旅/CEOpage.png" alt="ceo_page"></p>
<p>再之后就是搜索到对应的姓名点击链接进入并搜集需要的信息</p>
<h3 id="初次实现"><a href="#初次实现" class="headerlink" title="初次实现"></a>初次实现</h3><p>起初是打算用urllib之类的很底层的库来模拟get和post之类的过程而不打算使用浏览器，后来看网站的网络请求过程比较复杂于是就入坑了selenium</p>
<p>第一次使用selenium，由于是在家里只能百度搜索（吐槽下百度各种广告和搜不到）还有各种原因看不了官网文档，于是跟着网上的大部分博客写了个简单粗暴的版本</p>
<p>首先selenium的浏览器可以选择phantomjs,chrome,firefox,这里由于不想折腾太多环境问题，我就选择了chrome</p>
<h4 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h4><p>首先查看chrome版本,在浏览器标签栏输入chrome://version查看浏览器版本信息</p>
<p><img src="/2019/02/21/菜鸡的selenium之旅/chromeVersion.png" alt="chrome_version"></p>
<p>然后对应如下表格找到对应chromeDriver版本下载安装<br>|chromeDriver版本|chrome版本|<br>|:-:|:-:|<br>|v2.43|v69-71|<br>|v2.42|v68-70|<br>|v2.41|v67-69|<br>|v2.40|v66-68|<br>|v2.39|v66-68|<br>|v2.38|v65-67|<br>|v2.37|v64-66|<br>|v2.36|v63-65|<br>|v2.35|v62-64|<br>|v2.34|v61-63|<br>|v2.33|v60-62|<br>|v2.32|v59-61|<br>|v2.31|v58-60|<br>|v2.30|v58-60|<br>|v2.29|v56-58|<br>|v2.28|v55-57|<br>|v2.27|v54-56|<br>|v2.26|v53-55|<br>|v2.25|v53-55|<br>|v2.24|v52-54|<br>|v2.23|v51-53|<br>|v2.22|v49-52|<br>|v2.21|v46-50|<br>|v2.20|v43-48|<br>|v2.19|v43-47|<br>|v2.18|v43-46|<br>|v2.17|v42-43|<br>|v2.13|v42-45|<br>|v2.15|v40-43|<br>|v2.14|v39-42|<br>|v2.13|v38-41|<br>|v2.12|v36-40|<br>|v2.11|v36-40|<br>|v2.10|v33-36|<br>|v2.9|v31-34|<br>|v2.8|v30-33|<br>|v2.7|v30-33|<br>|v2.6|v29-32|<br>|v2.5|v29-32|<br>|v2.4|v29-32|</p>
<p>这边是chromedriver的链接</p>
<ul>
<li><a href="http://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="noopener">官网</a></li>
<li><a href="http://npm.taobao.org/mirrors/chromedriver/" target="_blank" rel="noopener">淘宝源</a></li>
</ul>
<p>接下来安装selenium(我的机子python2和3都装了，只装了３的可以只敲pip)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install selenium</span><br></pre></td></tr></table></figure></p>
<h4 id="初次搬砖"><a href="#初次搬砖" class="headerlink" title="初次搬砖"></a>初次搬砖</h4><p>selenium的API参考<a href="https://seleniumhq.github.io/selenium/docs/api/py/api.html" target="_blank" rel="noopener">官方说明</a></p>
<p>这边列举下常用接口(转自<a href="https://www.cnblogs.com/yufeihlf/p/5764807.html" target="_blank" rel="noopener">https://www.cnblogs.com/yufeihlf/p/5764807.html</a>)</p>
<p>可用driver:</p>
<ul>
<li>phantomjs</li>
<li>chrome</li>
<li>firefox</li>
</ul>
<p>常用变量:</p>
<ul>
<li>driver.current_url：用于获得当前页面的URL</li>
<li>driver.title：用于获取当前页面的标题</li>
<li>driver.page_source:用于获取页面html源代码</li>
<li>driver.current_window_handle:用于获取当前窗口句柄</li>
<li>driver.window_handles:用于获取所有窗口句柄</li>
</ul>
<p>常用函数：</p>
<ul>
<li>driver.find_element*():定位元素</li>
<li>driver.get(url):浏览器加载url。<br>实例：driver.get(“http//:<a href="http://www.baidu.com&quot;" target="_blank" rel="noopener">www.baidu.com&quot;</a>)</li>
<li>driver.forward()：浏览器向前（点击向前按钮）。</li>
<li>driver.back()：浏览器向后（点击向后按钮）。</li>
<li>driver.refresh()：浏览器刷新（点击刷新按钮）。</li>
<li>driver.close()：关闭当前窗口，或最后打开的窗口。</li>
<li>driver.quit():关闭所有关联窗口，并且安全关闭session。</li>
<li>driver.maximize_window():最大化浏览器窗口。</li>
<li>driver.set_window_size(宽，高)：设置浏览器窗口大小。</li>
<li>driver.get_window_size()：获取当前窗口的长和宽。</li>
<li>driver.get_window_position()：获取当前窗口坐标。</li>
<li>driver.get_screenshot_as_file(filename):截取当前窗口。<br>实例：driver.get_screenshot_as_file(‘D:/selenium/image/baidu.jpg’)</li>
<li>driver.implicitly_wait(秒)：隐式等待，通过一定的时长等待页面上某一元素加载完成。<br>若提前定位到元素，则继续执行。若超过时间未加载出，则抛出NoSuchElementException异常。<br>实例：driver.implicitly_wait(10) #等待10秒</li>
<li>driver.switch_to_frame(id或name属性值)：切换到新表单(同一窗口)。若无id或属性值，可先通过xpath定位到iframe，再将值传给switch_to_frame()</li>
<li>driver.switch_to.parent_content():跳出当前一级表单。该方法默认对应于离它最近的switch_to.frame()方法。</li>
<li>driver.switch_to.default_content():跳回最外层的页面。</li>
<li>driver.switch_to_window(窗口句柄)：切换到新窗口。</li>
<li>driver.switch_to.window(窗口句柄):切换到新窗口。</li>
<li>driver.switch_to_alert():警告框处理。处理JavaScript所生成的alert,confirm,prompt.</li>
<li>driver.switch_to.alert():警告框处理。</li>
<li>driver.execute_script(js):调用js。</li>
<li>driver.get_cookies():获取当前会话所有cookie信息。</li>
<li>driver.get_cookie(cookie_name)：返回字典的key为“cookie_name”的cookie信息。<br>实例：driver.get_cookie(“NET_SessionId”)</li>
<li>driver.add_cookie(cookie_dict):添加cookie。“cookie_dict”指字典对象，必须有name和value值。</li>
<li>driver.delete_cookie(name,optionsString):删除cookie信息。</li>
<li>driver.delete_all_cookies():删除所有cookie信息。</li>
</ul>
<p>至于元素的搜索有tag_name,xpath,id等多种方式，这里不一一列举,详见文档</p>
<p>首先是浏览器的打开，这里用的是chrome引擎<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">'https://finance.sina.com.cn/'</span></span><br><span class="line">browser.get(url)</span><br></pre></td></tr></table></figure></p>
<p>然后是关于超时加载的问题，这里我由于网速慢我设置了较长的等待时间等到一些元素加载完再执行js脚本让浏览器停止加载全部页面</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">openHomePage</span><span class="params">(browser,url)</span>:</span></span><br><span class="line">    browser.set_page_load_timeout(<span class="number">240</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        browser.get(url)</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'stop load'</span>)</span><br><span class="line">        browser.execute_script(<span class="string">'window.stop ? window.stop() : document.execCommand("Stop");'</span>) <span class="comment">#执行js脚本</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<p>之后就是按要求搜索到对应html元素并且执行对应操作,，就是各种find_element然后click或者send_key,然后控制一下sleep来等待加载网页元素防止报错元素不存在即还未加载完这里就不一一贴代码了，后面会放代码链接</p>
<p>这里有一个用于切换tab页面的可以看一下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">switch_handle</span><span class="params">(handles,current_handle)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> handle <span class="keyword">in</span> handles:</span><br><span class="line">        <span class="keyword">if</span> handle != current_handle:</span><br><span class="line">            <span class="keyword">return</span> handle</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">switch_page</span><span class="params">(current_handle,handles,new_handle,browser)</span>:</span></span><br><span class="line">    current_handle = browser.current_window_handle</span><br><span class="line">    handles = browser.window_handles</span><br><span class="line">    new_handle = switch_handle(handles,current_handle)</span><br><span class="line">    browser.close()</span><br><span class="line">    browser.switch_to.window(new_handle)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<p>第一次搬砖过程中由于是第一次入坑selenium而且有点小偷懒，于是GUI也没关，就用上面那个步骤把输入文件读入后for了一下暴力解决，结果显而易见龟速爬虫，于是后面朋友还是类似操作的爬虫要求我进行了优化</p>
<h4 id="进行优化"><a href="#进行优化" class="headerlink" title="进行优化"></a>进行优化</h4><p>由于初次搬砖结果一般般,然后我开始考虑优化，首先一个是使用了GUI然后速度太慢，第二个由于等待加载过程什么也没做cpu空闲着可以考虑用多线程优化,第三个通过分析网页链接可以知道公司高管界面的url有一定规律，直接get这个界面省去前面的操作</p>
<p>关于无头浏览器，一开始我是去直接安装phantomjs但是遇到各种坑后面发现selenium后面不支持phantomjs了，有些接口是没维护的，于是后来使用了chrome的无头模式，也不会慢多少</p>
<p>无头模式可以在生成driver对象的时候填入chrome_options进行设置，下面代码顺便设置了一些service_args用来禁用一些图片加载和忽略一些网络错误以及启用浏览器cache</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line">service_args = [<span class="string">'--ignore-ssl-errors=true'</span>,<span class="string">'--ssl-protocol=TLSv1'</span>,<span class="string">'--load-images=no'</span>,<span class="string">'--disk-cache=yes'</span>]</span><br><span class="line">browser = webdriver.Chrome(service_args=service_args,chrome_options=chrome_options)</span><br></pre></td></tr></table></figure>
<p>关于多线程，这部分经历了一定的思考过程，由于不同线程之间的互斥访问资源，最后想到使用循环队列来解决这个问题，这里我写了一个类用来实现这部分功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">conChrome</span>:</span></span><br><span class="line">    chrome_max = <span class="number">1</span>　<span class="comment"># 最大线程数</span></span><br><span class="line">    interval = <span class="number">0.00001</span> <span class="comment"># 两个线程之间创建时间间隔</span></span><br><span class="line">    timeout = <span class="number">240</span> <span class="comment"># 设置超时时间</span></span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    service_args = [<span class="string">'--ignore-ssl-errors=true'</span>,<span class="string">'--ssl-protocol=TLSv1'</span>,<span class="string">'--load-images=no'</span>,<span class="string">'--disk-cache=yes'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.q_chrome = queue.Queue() <span class="comment">#chromeDriver队列</span></span><br><span class="line">        self.chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line">        self.q_output = queue.Queue() <span class="comment">#偷懒用来存储输出</span></span><br><span class="line">        self.q_error = queue.Queue()　<span class="comment">#偷懒用来存储error</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 多线程创建driver</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_chrome</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">open_threading</span><span class="params">()</span>:</span></span><br><span class="line">            browser = webdriver.Chrome(service_args=conChrome.service_args,chrome_options=conChrome.chrome_options)</span><br><span class="line">            browser.implicitly_wait(conChrome.timeout)</span><br><span class="line">            browser.set_page_load_timeout(conChrome.timeout)</span><br><span class="line">            self.q_chrome.put(browser) <span class="comment">#　往队列末尾添加driver</span></span><br><span class="line">        </span><br><span class="line">        th = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(conChrome.chrome_max):</span><br><span class="line">            t = threading.Thread(target=open_threading)</span><br><span class="line">            th.append(t)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">            i.start()</span><br><span class="line">            time.sleep(conChrome.interval) <span class="comment">#设置两个线程创建时间间隔</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">            i.join()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 多线程关闭chrome</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_chrome</span><span class="params">(self)</span>:</span></span><br><span class="line">        th = []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">close_threading</span><span class="params">()</span>:</span></span><br><span class="line">            browser = self.q_chrome.get()</span><br><span class="line">            browser.quit()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.q_chrome.qsize()):</span><br><span class="line">            t = threading.Thread(target=close_threading)</span><br><span class="line">            th.append(t)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">            i.start()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">            i.join()</span><br></pre></td></tr></table></figure>
<p>然后在类里面写一个getPage函数,get一个driver出队列,操作完put回去队列尾部，具体代码就不贴全部了给关键操作后面有链接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getPage</span><span class="params">(url)</span>:</span></span><br><span class="line">    browser = self.q_chrome.get()</span><br><span class="line">    browser.get(url)</span><br><span class="line">    ... <span class="comment"># 一些爬虫操作抓取信息</span></span><br><span class="line">    self.q_chrome.put(browser)</span><br></pre></td></tr></table></figure>
<p>最后是main里面创建多线程</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cur = conChrome()</span><br><span class="line">conChrome.chrome_max = <span class="number">3</span></span><br><span class="line">cur.open_chrome()</span><br><span class="line"><span class="keyword">print</span> (<span class="string">'chrome num is '</span>,cur.q_chrome.qsize())</span><br><span class="line">th = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> input:</span><br><span class="line">    t = threading.Thread(target=cur.getPage,args=(i,))</span><br><span class="line">    th.append(t)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">    i.start()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> th:</span><br><span class="line">    i.join()</span><br><span class="line"></span><br><span class="line">cur.close_chrome()</span><br></pre></td></tr></table></figure>
<h3 id="源码链接"><a href="#源码链接" class="headerlink" title="源码链接"></a>源码链接</h3><ul>
<li><a href="https://github.com/caijh23/SpiderSinaFinance" target="_blank" rel="noopener">源码</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/21/菜鸡的selenium之旅/" data-id="cjsesnjmf000damnqmbpjvah3" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-关于dom的事件传播机制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/关于dom的事件传播机制/" class="article-date">
  <time datetime="2018-06-30T15:19:40.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/关于dom的事件传播机制/">关于dom的事件传播机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="关于dom的事件传播机制"><a href="#关于dom的事件传播机制" class="headerlink" title="关于dom的事件传播机制"></a>关于dom的事件传播机制</h4><p>场景： Vue项目里点击一个菜品列表的一个item进去详细信息页，在点击item内部的加号按钮时同时触发了加号按钮监听的事件和点击item跳转的事件<br>解决方案：可以利用dom的事件流原理解决</p>
<h4 id="关于dom的事件流"><a href="#关于dom的事件流" class="headerlink" title="关于dom的事件流"></a>关于dom的事件流</h4><p>dom的事件流有两种模式，冒泡和捕获</p>
<ul>
<li>冒泡模式：冒泡模式下事件从触发的element开始逐层往父节点传递</li>
<li>捕获模式：捕获模式顺序和冒泡模式反过来</li>
</ul>
<p>由于历史原因现在默认是冒泡模式，要更改模式可以调用addEventListener接口把最后一个参数赋值true就行</p>
<h4 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h4><p>在我的项目中父对象是item子对象是i标签,大概如下的结构<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>可以在父对象监听器调用的函数判断event的触发者<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">viewDetailedDish (d, event) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.target.tagName)</span><br><span class="line">    <span class="keyword">if</span> (event.target.tagName === <span class="string">'I'</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.dishes)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'prevent'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setDetailDish(d)</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123;<span class="attr">name</span>: <span class="string">'Details'</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/关于dom的事件传播机制/" data-id="cjsesnjm6000bamnqxlx2ih69" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-finalReport" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/finalReport/" class="article-date">
  <time datetime="2018-06-30T14:08:12.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/finalReport/">finalReport</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="简短的课程学习自我总结（400字以内）"><a href="#简短的课程学习自我总结（400字以内）" class="headerlink" title="简短的课程学习自我总结（400字以内）"></a>简短的课程学习自我总结（400字以内）</h4><ul>
<li>请不用讲述与分析、设计、开发、管理无关的话题</li>
<li>可以包括对同学帮助的致谢（同学姓名请用 github 昵称表示，不许出现真实姓名）</li>
<li>0 ~ 400字，即没有这段也没关系</li>
</ul>
<p>在这次项目中担任了前端工程师和产品经理的任务吧，前期主要是负责分配各种文档给谁写的任务，编码过程中主要负责手机端的前端Vue代码编写以及和后端沟通接口问题，总的来说有些小成长吧，第一次担任管理类的角色总感觉有些力不从心（其实感觉个人更适合编码，毕竟后期主要都是在搬前端的砖），管理方面的话感觉逐渐感受到沟通还有项目规划的重要性吧，编码方面这次前端搬砖搬了挺多的吧，感觉加深了对MVC架构的理解，设计方面的话实际上就是参考框架和上课老师讲的一些设计模式设计的（我们用Django很自然地分了模块），至于分析方面，其实需求分析能力感觉个人还应该提升</p>
<h4 id="PSP-2-1-统计表"><a href="#PSP-2-1-统计表" class="headerlink" title="PSP 2.1 统计表"></a>PSP 2.1 统计表</h4><table>
<thead>
<tr>
<th>PSP2.1</th>
<th>Personal Software Process Stages</th>
<th>Time(%)</th>
</tr>
</thead>
<tbody>
<tr>
<td><b>Planning<b></b></b></td>
<td><b>计划<b></b></b></td>
<td><b>5<b></b></b></td>
</tr>
<tr>
<td>Estimate</td>
<td>估计这个任务需要多少时间</td>
<td>5</td>
</tr>
<tr>
<td><b>Development<b></b></b></td>
<td><b>开发<b></b></b></td>
<td><b>85<b></b></b></td>
</tr>
<tr>
<td>Analysis</td>
<td>市场调研,需求分析</td>
<td>8</td>
</tr>
<tr>
<td>Design Spec</td>
<td>生成设计文档</td>
<td>8</td>
</tr>
<tr>
<td>Design Review</td>
<td>设计复审</td>
<td>5</td>
</tr>
<tr>
<td>Coding Standard</td>
<td>代码规范</td>
<td>2</td>
</tr>
<tr>
<td>Design</td>
<td>具体设计</td>
<td>17</td>
</tr>
<tr>
<td>Coding</td>
<td>具体编码</td>
<td>35</td>
</tr>
<tr>
<td>Code Review</td>
<td>代码复审</td>
<td>2</td>
</tr>
<tr>
<td>Test</td>
<td>测试</td>
<td>8</td>
</tr>
<tr>
<td><b>Reporting<b></b></b></td>
<td><b>报告<b></b></b></td>
<td><b>10<b></b></b></td>
</tr>
<tr>
<td>Test Report</td>
<td>测试报告</td>
<td>4</td>
</tr>
<tr>
<td>Size MeaSurement</td>
<td>计算工作量</td>
<td>3</td>
</tr>
<tr>
<td>Postmortem&amp;Process Improvement Plan</td>
<td>时候总结,并提出过程改进计划</td>
<td>3</td>
</tr>
</tbody>
</table>
<h4 id="个人分支的-GIT-统计报告（不需要解释原因）-仅需要提交截图"><a href="#个人分支的-GIT-统计报告（不需要解释原因）-仅需要提交截图" class="headerlink" title="个人分支的 GIT 统计报告（不需要解释原因）- 仅需要提交截图"></a>个人分支的 GIT 统计报告（不需要解释原因）- 仅需要提交截图</h4><ul>
<li>WebOrder</li>
</ul>
<p><img src="/2018/06/30/finalReport/gitRecord1.png" alt="WebOrder"></p>
<p>具体的如下<br><img src="/2018/06/30/finalReport/gitRecord4.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord5.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord6.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord7.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord8.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord9.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord10.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord11.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord12.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord13.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord14.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord15.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord16.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord17.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord18.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord19.png" alt="WebOrder"><br><img src="/2018/06/30/finalReport/gitRecord20.png" alt="WebOrder"></p>
<ul>
<li>CookEnd</li>
</ul>
<p><img src="/2018/06/30/finalReport/gitRecord2.png" alt="CookEnd"><br>具体如下<br><img src="/2018/06/30/finalReport/gitRecord21.png" alt="CookEnd"></p>
<ul>
<li>dashboard</li>
</ul>
<p><img src="/2018/06/30/finalReport/gitRecord3.png" alt="dashboard"></p>
<h4 id="自认为最得意-或有价值-或有苦劳的工作清单，含简短说明（一句话）"><a href="#自认为最得意-或有价值-或有苦劳的工作清单，含简短说明（一句话）" class="headerlink" title="自认为最得意/或有价值/或有苦劳的工作清单，含简短说明（一句话）"></a>自认为最得意/或有价值/或有苦劳的工作清单，含简短说明（一句话）</h4><ul>
<li>前期一些文档的编写，比如用例图，一些ssd之类的</li>
<li>前期编写了WebOrder手机端的文件目录</li>
<li>一些必要的开会沟通？（有时候群里交流说不清然后就一起到文化室）</li>
<li>后期一些前端接口与后端对接，假微信登录，假支付接口，提交订单接口，获取菜品接口，获取历史订单接口，评价历史订单接口</li>
<li>后期把之前的直男审美UI设计调整成目前的手机端界面，做了挺多css以及vue组件或者一些开源组件使用的调整，比如主页面，支付弹框，用户信息页，历史订单页，假微信登录页</li>
<li>前端bug修复，一些点击事件问题，一些接口调用问题，浏览器跨域请求问题等等(在对接接口过程中出现不少问题踩了不少坑，后期优化ui还有前端一些bug也是在做着)</li>
<li>将前端手机端文件build成静态资源后在服务器上部署ngnix定位资源以及前端api时的反向代理时编写conf文件和配置ngnix解决环境问题</li>
</ul>
<h4 id="个人的技术类、项目管理类博客清单（只需要名称与-url-）"><a href="#个人的技术类、项目管理类博客清单（只需要名称与-url-）" class="headerlink" title="个人的技术类、项目管理类博客清单（只需要名称与 url ）"></a>个人的技术类、项目管理类博客清单（只需要名称与 url ）</h4><ul>
<li><a href="https://caijh23.github.io/2018/06/30/%E7%B3%BB%E5%88%86%E9%A1%B9%E7%9B%AE%E8%BF%90%E7%BB%B4%E6%97%A5%E8%AE%B0/" target="_blank" rel="noopener">安装ngnix时遇到一些依赖问题与vue router history mode在非服务器根目录下conf的配置</a></li>
<li><a href="https://caijh23.github.io/2018/06/30/post-403/" target="_blank" rel="noopener">前端踩坑之post 403</a></li>
<li><a href="https://caijh23.github.io/2018/06/30/%E5%85%B3%E4%BA%8Edom%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B6/" target="_blank" rel="noopener">关于dom的事件传播机制</a></li>
<li><a href="https://caijh23.github.io/2018/06/30/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%84%9F%E6%83%B3/" target="_blank" rel="noopener">一点团队沟通小感想</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/finalReport/" data-id="cjsesnjm2000aamnqbi6riojd" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-关于项目管理的一些小感想" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/关于项目管理的一些小感想/" class="article-date">
  <time datetime="2018-06-30T09:11:05.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/关于项目管理的一些小感想/">关于项目管理的一些小感想</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="作为团队的产品经理加前端工程师？？"><a href="#作为团队的产品经理加前端工程师？？" class="headerlink" title="作为团队的产品经理加前端工程师？？"></a>作为团队的产品经理加前端工程师？？</h4><p>这次系分组队组了个直男团队，一开始也没有人愿意做管理这块的工作，然后就分锅咯，最后产品经理的活落我这里，也是第一次做这种工作感觉做得不是很合格，跟其他项目的做管理的妹子请教过她说最重要的是规划和人格魅力，就有的时候在群里喊干活了或者讨论一下然后群里没有应答，而且任务分配这一块也是，还有需求分析等等，一些队友的实习工作甩锅之类的问题，后期编码阶段我是前端这边然后大家水平也不一样然后就各种补锅之类的问题，最后在各位队友的合作下也算解决了吧，总得来说有下面几点有助于管理吧。</p>
<h4 id="有助于管理项目的几个点"><a href="#有助于管理项目的几个点" class="headerlink" title="有助于管理项目的几个点"></a>有助于管理项目的几个点</h4><ul>
<li>面向ddl开发,看板一定要用，有了ddl团队才不会有惰性</li>
<li>沟通很重要，前后端接口之间，领域模型设计，关于项目用例的看法之类的，要及时沟通，这次项目在接口对接的时候由于后端大佬把文档写在后端仓库里面而前端开发以为是在dashboard仓库那个导致后来接口对接的时候出现挺大问题，总之在每个系统顺序图（ssd）出来的时候应该及时进行两边的沟通，其他文档提交后也同理要这么做</li>
<li>对一个新的功能需求要准确评估代价，在项目提交前我们加了个用例然后也是花了挺长时间写的，我认为这个十分必要</li>
<li>最后是任务分配问题，开会分配任务吧，面对面沟通完把任务分配完贴到看板上我觉得比较有效率。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/关于项目管理的一些小感想/" data-id="cjsesnjn4000famnqi850azht" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-post-403" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/post-403/" class="article-date">
  <time datetime="2018-06-30T09:04:08.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/post-403/">post 403</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前端psot返回403（CSRF-Failed-CSRF-token-missing-or-incorrect）"><a href="#前端psot返回403（CSRF-Failed-CSRF-token-missing-or-incorrect）" class="headerlink" title="前端psot返回403（CSRF Failed: CSRF token missing or incorrect）"></a>前端psot返回403（CSRF Failed: CSRF token missing or incorrect）</h2><p>情景：在Vue项目中用axios发送post请求返回标题所述的403<br>原因：这是OAuth 2.0中为了防止第三方网站攻击加上的字段，从document.cookie里面将对应字段取出加在request header里发出post即可<br>实现代码如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getCookie = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> value = <span class="string">'; '</span> + <span class="built_in">document</span>.cookie</span><br><span class="line">  <span class="keyword">let</span> parts = value.split(<span class="string">'; '</span> + name + <span class="string">'='</span>)</span><br><span class="line">  <span class="keyword">if</span> (parts.length === <span class="number">2</span>) <span class="keyword">return</span> parts.pop().split(<span class="string">';'</span>).shift()</span><br><span class="line">&#125;</span><br><span class="line">axios.post(<span class="string">'/api/wxLogin/'</span>, params, &#123;<span class="attr">headers</span>: &#123;<span class="string">'X-CSRFToken'</span>: getCookie(<span class="string">'csrftoken'</span>)&#125;&#125;)</span><br><span class="line"><span class="comment">//差不多就这么写把后面的回调函数就不贴了</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/post-403/" data-id="cjsesnjmb000camnqdn4vufum" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-系分项目运维日记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/系分项目运维日记/" class="article-date">
  <time datetime="2018-06-30T08:49:45.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/30/系分项目运维日记/">系分项目运维日记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="运维日记"><a href="#运维日记" class="headerlink" title="运维日记"></a>运维日记</h4><p>在代理服务器上配置ngnix服务器反向代理转发API请求遇到如下两个坑</p>
<ul>
<li>安装ngnix时遇到一些依赖问题</li>
<li>vue router history mode在非服务器根目录下conf的配置<h5 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h5>首先去ngnix官网下载安装包，可以用curl或wget直接下到服务器上<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.9.9.tar.gz</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>解压<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.9.9.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>然后先进入解压好的文件夹内编译安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> nginx-1.9.9/</span><br><span class="line">./configure</span><br></pre></td></tr></table></figure></p>
<p>这时候还没make编译但是报了个少pcre的错误<br>如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either <span class="built_in">disable</span> the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the <span class="built_in">source</span> with nginx by using --with-pcre=&lt;path&gt; option.</span><br></pre></td></tr></table></figure></p>
<p>然后去pcre官网下安装包，同理用wget或者curl下载到服务器上，然后解压安装，这是官网链接<a href="https://ftp.pcre.org/pub/pcre/" target="_blank" rel="noopener">https://ftp.pcre.org/pub/pcre/</a><br>同理解压后安装如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> pcre-8.42/</span><br><span class="line">./configure  --prefix=/usr/<span class="built_in">local</span>/pcre</span><br><span class="line">make</span><br><span class="line">make check</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p>
<p>上面的check选项用于测试是否编译出错<br>安装完毕后重新安装ngnix<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx  --with-pcre=/usr/<span class="built_in">local</span>/pcre/</span><br></pre></td></tr></table></figure></p>
<p>这个时候仍然缺少zlib库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP gzip module requires the zlib library.</span><br><span class="line">You can either <span class="built_in">disable</span> the module by using --without-http_gzip_module</span><br><span class="line">option, or install the zlib library into the system, or build the zlib library</span><br><span class="line">statically from the <span class="built_in">source</span> with nginx by using --with-zlib=&lt;path&gt; option.</span><br></pre></td></tr></table></figure></p>
<p>直接用apt安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zlib1g</span><br><span class="line">sudo apt install zlib1g-dev</span><br></pre></td></tr></table></figure></p>
<p>然后搜了一下资料把其他相关依赖也装了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libpcre3 libpcre3-dev libpcrecpp0v5 libssl-dev</span><br></pre></td></tr></table></figure></p>
<p>之后安装ngnix<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p>
<p>去安全组那边开放80端口</p>
<p><img src="/2018/06/30/系分项目运维日记/1530004461472.png" alt="Alt text"></p>
<p>然后去ngnix目录启动ngnix<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/ngnix/sbin</span><br><span class="line">sudo ./ngnix</span><br></pre></td></tr></table></figure></p>
<h4 id="关于Vue的history-mode在配置ngnix时的一些坑"><a href="#关于Vue的history-mode在配置ngnix时的一些坑" class="headerlink" title="关于Vue的history mode在配置ngnix时的一些坑"></a>关于Vue的history mode在配置ngnix时的一些坑</h4><p>vue router默认是hash模式，但是我们在项目中用url的params来确定桌子号故必须用history模式，一开始我按照官网教程编译完直接使用try_files指令配置ngnix但是一直找不到资源，后来翻国外论坛看到了，大概如下配置<br>首先要更改Vue Router的配置的base路径（下面的/cloud/路径即为服务器中该项目前端资源的路径）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">base: <span class="string">'/cloud/'</span>,</span><br><span class="line"><span class="comment">// base: __dirname,</span></span><br></pre></td></tr></table></figure></p>
<p>然后更改config/index.js里的配置文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assetsPublicPath: <span class="string">'/cloud/'</span>, </span><br><span class="line"><span class="comment">// assetsPublicPath: '/',</span></span><br></pre></td></tr></table></figure></p>
<p>最后在ngnix的配置文件中使用alias命令定位资源<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span><span class="regexp"> ^~</span> /cloud/ &#123;</span><br><span class="line">           <span class="attribute">alias</span> /home/ubuntu/EasyOrderMeal/WebOrder/dist/;</span><br><span class="line">           <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">           <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /cloud/index.html;</span><br><span class="line">           <span class="comment">#root   html;</span></span><br><span class="line">           <span class="comment">#proxy_pass http://localhost:8080;</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/30/系分项目运维日记/" data-id="cjsesnjn0000eamnqm038dct3" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HomeworkLesson16" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/27/HomeworkLesson16/" class="article-date">
  <time datetime="2018-06-27T15:52:44.000Z" itemprop="datePublished">2018-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/27/HomeworkLesson16/">HomeworkLesson16</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-使用-ECB-实现-make-reservation-用例的详细设计（包含用例简介，顺序图，类图"><a href="#1-使用-ECB-实现-make-reservation-用例的详细设计（包含用例简介，顺序图，类图" class="headerlink" title="1.使用 ECB 实现 make reservation 用例的详细设计（包含用例简介，顺序图，类图)"></a>1.使用 ECB 实现 make reservation 用例的详细设计（包含用例简介，顺序图，类图)</h4><ul>
<li>用例简介</li>
</ul>
<p><img src="/2018/06/27/HomeworkLesson16/makeReservation.png" alt="usercase"></p>
<p><img src="/2018/06/27/HomeworkLesson16/makeReservation2.png" alt="usercase"></p>
<ul>
<li>顺序图</li>
</ul>
<p><img src="/2018/06/27/HomeworkLesson16/makeReservation3.png" alt="sequence"></p>
<ul>
<li>类图</li>
</ul>
<p><img src="/2018/06/27/HomeworkLesson16/makeReservation4.png" alt="class"></p>
<h4 id="2-将逻辑设计类图映射到实际项目框架的包图。用树形结构表述实现的包和类"><a href="#2-将逻辑设计类图映射到实际项目框架的包图。用树形结构表述实现的包和类" class="headerlink" title="2.将逻辑设计类图映射到实际项目框架的包图。用树形结构表述实现的包和类"></a>2.将逻辑设计类图映射到实际项目框架的包图。用树形结构表述实现的包和类</h4><p><img src="/2018/06/27/HomeworkLesson16/makeReservation5.png" alt="code"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/27/HomeworkLesson16/" data-id="cjsesnjlh0006amnqpz2gjamf" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HomeworkLesson13" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/02/HomeworkLesson13/" class="article-date">
  <time datetime="2018-06-02T06:11:28.000Z" itemprop="datePublished">2018-06-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/02/HomeworkLesson13/">HomeworkLesson13</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-描述软件架构与框架之间的区别与联系"><a href="#1-描述软件架构与框架之间的区别与联系" class="headerlink" title="1.描述软件架构与框架之间的区别与联系"></a>1.描述软件架构与框架之间的区别与联系</h4><p>软件架构</p>
<ul>
<li>定义：软件架构就是把系统分解为一些部件，描述这些部件的职责及它们之间的协作行为。</li>
<li>特点<ul>
<li>软件结构是业界长期最佳实践的总结。</li>
<li>软件架构是对系统的一种理解，与具体语言无关。</li>
</ul>
</li>
</ul>
<p>应用程序框架</p>
<ul>
<li>定义：框架是特定语言和技术的架构应用解决方案。例如 Java Spring web framework，它包含了 Java 开发 web 应用的各种业务场景的具体解决方案。</li>
<li>特点<ul>
<li>框架是具体语言和技术相关的。 </li>
<li>框架是一种或多种架构的组合的实现。</li>
<li>框架是集成了你的代码和多种第三方解决方案的工具，让你聚焦 业务逻辑代码 而 不是技术实现。</li>
</ul>
</li>
</ul>
<h4 id="2-以你的项目为案例"><a href="#2-以你的项目为案例" class="headerlink" title="2.以你的项目为案例"></a>2.以你的项目为案例</h4><ul>
<li>绘制三层架构模型图，细致到分区</li>
<li>结合你程序的结构，从程序员角度说明三层架构给开发者带来的便利</li>
</ul>
<p>三层模型图如下图所示<br><img src="/2018/06/02/HomeworkLesson13/order_architecture.png" alt="order_arch"></p>
<ul>
<li>对于负责表示层的程序员，他只需关注MVC模型，处理 HTTP Request，然后调用业务服务，产生Response，而不需关注其他两层的编程元素</li>
<li>对于负责业务层的程序员，他只需提供满足各个业务的服务模块，以满足restfulAPI规范的接口</li>
<li>对于负责持久化层的程序员，他只需关注数据库机制，提供ORM支持返回数据对象供业务层调用</li>
</ul>
<h4 id="3-研究-VUE-与-Flux-状态管理的异同"><a href="#3-研究-VUE-与-Flux-状态管理的异同" class="headerlink" title="3.研究 VUE 与 Flux 状态管理的异同"></a>3.研究 VUE 与 Flux 状态管理的异同</h4><h5 id="对于Flux，可以参考官网的图"><a href="#对于Flux，可以参考官网的图" class="headerlink" title="对于Flux，可以参考官网的图"></a>对于Flux，可以参考官网的图</h5><p><img src="/2018/06/02/HomeworkLesson13/flux.png" alt="flux"></p>
<h5 id="对于VUE，提供状态管理机制的主要是vuex，这里可以看官网给出的图"><a href="#对于VUE，提供状态管理机制的主要是vuex，这里可以看官网给出的图" class="headerlink" title="对于VUE，提供状态管理机制的主要是vuex，这里可以看官网给出的图"></a>对于VUE，提供状态管理机制的主要是vuex，这里可以看官网给出的图</h5><p><img src="/2018/06/02/HomeworkLesson13/vuex.png" alt="vuex"></p>
<p>下面是对于flux和vuex异同的说明</p>
<ul>
<li>flux : 一个 Model 可以被多个 Views 读取或被多个 Controllers 进行更新。在大型应用中，一个 Model 可能使多个 Views 去通知 Controllers，并可能触发更多的 Model 更新，这样结果就会变得非常复杂。Flux 通过强制单向数据流来解决这个额问题。Flux 使 Views 查询 Stores（而不是 Models），用户交互触发的 Actions 被提交到一个 Dispatcher 中。当 Actions 被派发后，Stores 将会随之更新自己并且通知 Views 进行修改。这些 Store 当中的修改会进一步促使 Views 查询新的数据。即在相对独立的组件中，action -&gt; state -&gt; view 的单向数据流能得到保证。</li>
<li>vuex : Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<ul>
<li>应用级的状态由store集中管理</li>
<li>修改状态的唯一方式是commit同步的mutation</li>
<li>异步逻辑放在action里</li>
</ul>
</li>
<li>总结：两者相比，vuex只有一个store(即vuex对象),而flux少了vuex通过action和mutation把异步与同步区别开来,vuex由store自身充当dispatcher（即view触发的动作都由vuex来注册/分发action和mutation）。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/02/HomeworkLesson13/" data-id="cjsesnjkp0003amnqjycsk5yv" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HomeworkLesson9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/14/HomeworkLesson9/" class="article-date">
  <time datetime="2018-05-13T16:46:03.000Z" itemprop="datePublished">2018-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/14/HomeworkLesson9/">HomeworkLesson9</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="虎扑APP-业务建模"><a href="#虎扑APP-业务建模" class="headerlink" title="虎扑APP 业务建模"></a>虎扑APP 业务建模</h1><p>15331006</p>
<h3 id="个人队伍建模文档"><a href="#个人队伍建模文档" class="headerlink" title="个人队伍建模文档"></a>个人队伍建模文档</h3><p><a href="https://github.com/EasyMealOrder/dashboard/blob/master/mid-term-exam/midTerm.pdf" target="_blank" rel="noopener">https://github.com/EasyMealOrder/dashboard/blob/master/mid-term-exam/midTerm.pdf</a></p>
<h3 id="建模练习文档"><a href="#建模练习文档" class="headerlink" title="建模练习文档"></a>建模练习文档</h3><p><a href="https://ooad-project.github.io/DashBoard/Hupu_app.pdf" target="_blank" rel="noopener">https://ooad-project.github.io/DashBoard/Hupu_app.pdf</a></p>
<h3 id="虎扑NBA板块的用例图"><a href="#虎扑NBA板块的用例图" class="headerlink" title="虎扑NBA板块的用例图"></a>虎扑NBA板块的用例图</h3><p><img src="/2018/05/14/HomeworkLesson9/Hupu_usercase.png" alt="UserCaseDiagram"></p>
<h3 id="观看某场NBA比赛文字直播的活动图"><a href="#观看某场NBA比赛文字直播的活动图" class="headerlink" title="观看某场NBA比赛文字直播的活动图"></a>观看某场NBA比赛文字直播的活动图</h3><p><img src="/2018/05/14/HomeworkLesson9/Hupu_textLive.png" alt="Activity"></p>
<h3 id="球队数据显示与球员数据显示的领域模型以及其关系"><a href="#球队数据显示与球员数据显示的领域模型以及其关系" class="headerlink" title="球队数据显示与球员数据显示的领域模型以及其关系"></a>球队数据显示与球员数据显示的领域模型以及其关系</h3><p><img src="/2018/05/14/HomeworkLesson9/Hupu_player_team.png" alt="domain_model"></p>
<h3 id="某场NBA比赛的状态图-从赛前到赛后"><a href="#某场NBA比赛的状态图-从赛前到赛后" class="headerlink" title="某场NBA比赛的状态图(从赛前到赛后)"></a>某场NBA比赛的状态图(从赛前到赛后)</h3><p><img src="/2018/05/14/HomeworkLesson9/Hupu_state.png" alt="State"></p>
<h3 id="订餐场景系统顺序图"><a href="#订餐场景系统顺序图" class="headerlink" title="订餐场景系统顺序图"></a>订餐场景系统顺序图</h3><p><img src="/2018/05/14/HomeworkLesson9/getPlayerInfo.png" alt="systemSequence"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/14/HomeworkLesson9/" data-id="cjsesnjln0007amnqcfyj4a4j" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HomeworkLesson8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/04/HomeworkLesson8/" class="article-date">
  <time datetime="2018-05-04T14:12:46.000Z" itemprop="datePublished">2018-05-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/04/HomeworkLesson8/">HomeworkLesson8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1）使用-UML-State-Model"><a href="#1）使用-UML-State-Model" class="headerlink" title="1）使用 UML State Model"></a>1）使用 UML State Model</h4><ul>
<li>建模对象： 参考 Asg_RH 文档， 对 Reservation/Order 对象建模。</li>
<li>建模要求： 参考练习不能提供足够信息帮助你对订单对象建模，请参考现在 定旅馆 的旅游网站，尽可能分析围绕订单发生的各种情况，直到订单通过销售事件（柜台销售）结束订单。</li>
</ul>
<p>如下图所示：<br><img src="/2018/05/04/HomeworkLesson8/RH_order.png" alt="order"></p>
<h4 id="2）研究淘宝退货流程活动图，对退货业务对象状态建模"><a href="#2）研究淘宝退货流程活动图，对退货业务对象状态建模" class="headerlink" title="2）研究淘宝退货流程活动图，对退货业务对象状态建模"></a>2）研究淘宝退货流程活动图，对退货业务对象状态建模</h4><p>如下图所示：<br><img src="/2018/05/04/HomeworkLesson8/taobao.png" alt="taobao"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/04/HomeworkLesson8/" data-id="cjsesnjl60005amnq8vrsp70u" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/21/菜鸡的selenium之旅/">菜鸡的selenium之旅</a>
          </li>
        
          <li>
            <a href="/2018/06/30/关于dom的事件传播机制/">关于dom的事件传播机制</a>
          </li>
        
          <li>
            <a href="/2018/06/30/finalReport/">finalReport</a>
          </li>
        
          <li>
            <a href="/2018/06/30/关于项目管理的一些小感想/">关于项目管理的一些小感想</a>
          </li>
        
          <li>
            <a href="/2018/06/30/post-403/">post 403</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>